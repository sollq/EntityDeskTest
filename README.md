# EntityDesk: Десктопное приложение для управления сущностями (WPF, NHibernate, MySQL)

![EntityDesk Logo](https://via.placeholder.com/600x200?text=EntityDesk)

## Описание проекта

**EntityDesk** — это десктопное приложение, разработанное на WPF с использованием паттерна MVVM, предназначенное для демонстрации CRUD-операций (Создание, Чтение, Обновление, Удаление) над различными бизнес-сущностями. В качестве ORM используется NHibernate, а данные хранятся в базе данных MySQL/MariaDB.

Проект создан в рамках тестового задания, с акцентом на чистую архитектуру, качество кода и использование современных паттернов проектирования.

## Функциональность

Приложение позволяет управлять следующими сущностями:

1.  **Сотрудник:**
    *   ФИО
    *   Должность (enum: Руководитель, Работник)
    *   Дата рождения
    *   Возможность добавления, просмотра, редактирования и удаления сотрудников.
    *   Защита от удаления сотрудника, если он является куратором контрагента или связан с заказами.

2.  **Контрагент:**
    *   Наименование
    *   ИНН
    *   Куратор (связь с сущностью "Сотрудник")
    *   Возможность добавления, просмотра, редактирования и удаления контрагентов.
    *   Защита от удаления контрагента, если с ним связаны заказы.

3.  **Заказ:**
    *   Дата
    *   Сумма
    *   Сотрудник (связь с сущностью "Сотрудник")
    *   Контрагент (связь с сущностью "Контрагент")
    *   Возможность добавления, просмотра, редактирования и удаления заказов.

**Общие функции:**
*   Отображение сущностей в виде таблиц.
*   Детальный просмотр и редактирование сущностей в отдельных модальных формах.
*   Подтверждение операций удаления для предотвращения случайной потери данных.

## Используемые технологии

*   **Фреймворк:** .NET 8.0
*   **Платформа:** WPF (Windows Presentation Foundation)
*   **Паттерны проектирования:** MVVM (Model-View-ViewModel), Repository, Unit of Work, Dependency Injection
*   **ORM:** NHibernate (с Fluent NHibernate для конфигурации маппингов)
*   **База данных:** MySQL / MariaDB
*   **Внедрение зависимостей (DI):** Microsoft.Extensions.DependencyInjection

## Структура проекта

Проект разделен на следующие логические слои:

*   **`EntityDesk.Core`**: Содержит модели данных (POCO) и интерфейсы репозиториев (`IRepository`, `IUnitOfWork`), определяющие бизнес-логику и контракты взаимодействия.
*   **`EntityDesk.Infrastructure`**: Содержит реализации инфраструктурных компонентов, таких как репозитории NHibernate (`NHRepository`, `NHUnitOfWork`), конфигурацию NHibernate (`NHibernateHelper`, маппинги), а также настройку Dependency Injection (`ServiceRegistration`).
*   **`EntityDesk.UI`**: Представляет собой WPF-приложение, содержащее View (XAML-файлы) и ViewModel (логика представления), а также точку входа приложения (`App.xaml.cs`) с настройкой DI и конфигурацией.

## Как запустить проект

Для запуска проекта вам потребуется:

*   Установленный .NET SDK 8.0 или выше.
*   Установленный MySQL или MariaDB сервер.
*   Клиент MySQL/MariaDB (например, MySQL Workbench, DBeaver) для проверки базы данных.

**Шаги для запуска:**

1.  **Клонируйте репозиторий:**
    ```bash
    git clone https://github.com/ВАШ_НИКНЕЙМ/EntityDesk.git
    cd EntityDesk
    ```
2.  **Настройте базу данных:**
    *   Убедитесь, что ваш MySQL/MariaDB сервер запущен.
    *   В файле `EntityDesk.UI/appsettings.json` убедитесь, что строка подключения соответствует вашей конфигурации MySQL/MariaDB.
        ```json
        {
          "ConnectionStrings": {
            "Default": "Server=localhost;Database=entitydesk;User=tests;Password=devpass;CharSet=utf8mb4;"
          }
        }
        ```
        *При необходимости измените `Server`, `User`, `Password`.*
        *База данных `entitydesk` будет автоматически создана при первом запуске приложения, если она не существует.*
3.  **Запустите проект:**
    ```bash
    dotnet run --project EntityDesk.UI
    ```
    Или откройте решение `EntityDesk.sln` в Visual Studio и запустите его оттуда.

При первом запуске NHibernate автоматически создаст все необходимые таблицы в базе данных `entitydesk` на основе настроенных маппингов.

---

**Автор:** [Твое Имя/Никнейм]
**Лицензия:** [Укажи лицензию, например, MIT] 